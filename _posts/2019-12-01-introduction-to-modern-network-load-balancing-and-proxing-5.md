---
layout: post
title: 최신 네트워크 로드 밸런싱 및 프록시 5 - 로드밸런싱의 미래 Introduction to modern network load balancing and proxing #4 - Current state of the art in L7 load balancing
tags: [번역, 로드밸런서]
---

[Introduction to modern network load balancing and proxing](https://blog.envoyproxy.io/introduction-to-modern-network-load-balancing-and-proxying-a57f6ff80236)

## 글로벌 로드 밸런싱 및 중앙 제어 평면

![Figure 13](/images/posts/figure13-global-load-balancing.png)

미래에는 개별 로드 밸런서를 상용 장치로 취급할 것이다. 나는 진정한 혁신과 상업적 기회는 모두 제어 평면에 있다고 생각한다. 그림 13은 글로벌 로드 밸런싱 시스템의 예시이다. 이 예시에는 몇 가지 다른 일이 발생한다. 

* 각 사이드카 프록시는 세 가지 다른 영역 (A, B 및 C)에서 백엔드와 통신한다.
* 그림에 묘사된 바와 같이, 트래픽의 90 %는 영역 C로 전송되고, 트래픽의 5 %는 영역 A 및 B로 전송된다.
* 사이드카 프록시와 백엔드 둘 다 주기적으로 로드 밸런서에 상태 보고를 한다. 글로벌로드 밸런서는 대기 시간, 비용,로드, 현재 장애 등을 고려한 결정을 내릴 수 있다.
글로벌 로드 밸런서는 현재 라우팅 정보를 사용하여 각 사이드카 프록시를 주기적으로 구성한다.

글로벌 로드 밸런서는 개별로드 밸런서가 자체적으로 할 수없는 정교한 작업을 수행 할 수 있게 된다. 예를 들면 다음과 같다.

* 영역별 장애를 자동으로 감지하고 라우팅 한다.
* 글로벌 보안 및 라우팅 정책을 적용한다.
* 머신 러닝 및 신경망을 사용하여 DDoS 공격을 포함한 트래픽 이상을 탐지하고 완화한다.
엔지니어가 전체 분산 시스템을 총체적으로 이해하고 운영 할 수있는 중앙 집중식 UI 및 시각화를 제공한다.
글로벌 로드 밸런싱을 가능하게 하려면 데이터 플레인으로 사용되는로드 밸런서에 정교한 동적 구성 기능이 있어야 한다.

## 하드웨어에서 소프트웨어로의 진화

지금까지 이 포스트는 주로 과거 L4로드 밸런서 HA 쌍과 관련하여 하드웨어와 소프트웨어에 대해서만 간략하게 언급했다. 이 분야의 업계 동향은 어떨까?

[tweet](/images/posts/tweet-The%20evolution%20from%20hardware%20to%20software.png)

이 트윗은 과장된 유머이지만 트렌드를 잘 요약하고 있다.
과거에는 라우터와 로드 밸런서가 매우 비싼 독점 하드웨어로 제공됐다.
점점 더 많은 독점 L3 / L4 네트워킹 장치가 IPVS, DPDK 및 fd.io와 같은 프레임 워크 위에 구축 된 상용 서버 하드웨어, 상용 NIC 및 특수 소프트웨어 솔루션으로 대체되고 있다. 5K 미만의 비용이 드는 최신 데이터 센터 시스템은 Linux 및 DPDK를 사용하여 작성된 사용자 지정 사용자 공간 응용 프로그램을 사용하여 매우 작은 패킷으로 80Gbps NIC를 쉽게 포화시킬 수 있다. 한편, 엄청난 총 대역폭 및 패킷 속도에서 ECMP 라우팅을 수행 할 수있는 저렴하고 기본적인 라우터 / 스위치 ASIC이 상용 라우터로 패키지 되고 있다.
NGINX, HAProxy 및 Envoy와 같은 정교한 L7 소프트웨어로드 밸런서는 이전에 F5와 같은 공급 업체의 영역을 빠르게 반복하고 잠식하고 있다. 따라서 L7로드 밸런서는 또한 상용 소프트웨어 솔루션으로 적극적으로 이동하고 있다.
동시에 업계 전체에서 주요 클라우드 제공 업체가 IaaS, CaaS 및 FaaS로 전환함에 따라 점점 더 적은 수의 엔지니어 만이 물리적 네트워크의 작동 방식을 이해해야 한다. (이런것들은 ‘흑마술’이자 ‘우리가 더이상 알 필요가 없는’ 섹션에 속한다.).


## 결론과 로드밸런싱의 미래

요약하자면, 게시물의 주요 내용은 다음과 같다.
* 로드 밸런서는 최신 분산 시스템의 핵심 구성요소다.
* 로드 밸런서에는 L4,  L7 두 가지 일반적인 종류가 있다.
* L4 및 L7로드 밸런서는 모두 현대 아키텍처와 관련이 있다.
* L4로드 밸런서는 수평 확장 가능 분산 일관된 해싱 솔루션으로 변하고 있다.
* 동적 마이크로 서비스 아키텍처의 확산으로 인해서 최근 L7로드 밸런서에 많은 투자가 이뤄지고 있다.
* 글로벌 로드 밸런싱과, 제어평면과 데이터 플레인 간의 분리는 로드 밸런싱의 미래다. 그리고 미래의 혁신과 상업적 기회의 대부분이 여기서 나온다.
* 업계는 네트워킹 솔루션을 위한 필수품 OSS 하드웨어 및 소프트웨어로 적극적으로 이동하고 있다. F5와 같은 전통적인로드 밸런싱 공급 업체가 OSS 소프트웨어와 클라우드 공급 업체에 의해 먼저 대체 될 것으로 생각한다. Arista / Cumulus 등의 기존 라우터 / 스위치 공급 업체 온 프레미스 배포에는 활주로가 더 많다고 생각하지만 궁극적으로는 퍼블릭 클라우드 공급 업체와 자체 물리적 네트워크로 대체 될 것이다.

나는 지금이 컴퓨터 네트워킹에서 매혹적인 상황이라고 생각한다! 대부분의 시스템에서 일어나는 OSS 및 소프트웨어를 향한 변화가 반복 속도를 몇 배나 증가시키고 있다. 또한“서버리스”패러다임을 통해 분산 시스템의 역동성이 계속됨과 동시에 기본 네트워크 및로드 밸런싱 시스템의 정교함이 커져야 한다.
